/*
 * Copyright 2012 Haiku, Inc. All rights reserved.
 * Distributed under the terms of the MIT License.
 *
 * Authors:
 *		Pawe≈Ç Dziepak, pdziepak@quarnos.org
 */
#ifndef NFS4DEFS_H
#define NFS4DEFS_H


#include <sys/stat.h>

#include <SupportDefs.h>

#include "Filehandle.h"

enum Procedure {
	ProcNull		= 0,
	ProcCompound	= 1
};

enum Opcode {
	OpAccess				= 3,
	OpClose					= 4,
	OpGetAttr				= 9,
	OpGetFH					= 10,
	OpLookUp				= 15,
	OpLookUpUp				= 16,
	OpOpen					= 18,
	OpOpenConfirm			= 20,
	OpPutFH					= 22,
	OpPutRootFH				= 24,
	OpRead					= 25,
	OpReadDir				= 26,
	OpReadLink				= 27,
	OpRemove				= 28,
	OpRename				= 29,
	OpRenew					= 30,
	OpSaveFH				= 32,
	OpSetClientID			= 35,
	OpSetClientIDConfirm	= 36
};

enum Access {
	ACCESS4_READ		= 0x00000001,
	ACCESS4_LOOKUP		= 0x00000002,
	ACCESS4_MODIFY		= 0x00000004,
	ACCESS4_EXTEND		= 0x00000008,
	ACCESS4_DELETE		= 0x00000010,
	ACCESS4_EXECUTE		= 0x00000020
};

enum Attribute {
	// Mandatory Attributes
	FATTR4_SUPPORTED_ATTRS		= 0,
	FATTR4_TYPE					= 1,
	FATTR4_FH_EXPIRE_TYPE		= 2,
	FATTR4_CHANGE				= 3,
	FATTR4_SIZE					= 4,
	FATTR4_LINK_SUPPORT			= 5,
	FATTR4_SYMLINK_SUPPORT		= 6,
	FATTR4_NAMED_ATTR			= 7,
	FATTR4_FSID					= 8,
	FATTR4_UNIQUE_HANDLES		= 9,
	FATTR4_LEASE_TIME			= 10,
	FATTR4_RDATTR_ERROR			= 11,
	FATTR4_FILEHANDLE			= 19,

	// Recommended Attributes
	FATTR4_ACL					= 12,
	FATTR4_ACLSUPPORT			= 13,
	FATTR4_ARCHIVE				= 14,
	FATTR4_CANSETTIME			= 15,
	FATTR4_CASE_INSENSITIVE		= 16,
	FATTR4_CASE_PRESERVING		= 17,
	FATTR4_CHOWN_RESTRICTED		= 18,
	FATTR4_FILEID				= 20,
	FATTR4_FILES_AVAIL			= 21,
	FATTR4_FILES_FREE			= 22,
	FATTR4_FILES_TOTAL			= 23,
	FATTR4_FS_LOCATIONS			= 24,
	FATTR4_HIDDEN				= 25,
	FATTR4_HOMOGENEOUS			= 26,
	FATTR4_MAXFILESIZE			= 27,
	FATTR4_MAXLINK				= 28,
	FATTR4_MAXNAME				= 29,
	FATTR4_MAXREAD				= 30,
	FATTR4_MAXWRITE				= 31,
	FATTR4_MIMETYPE				= 32,
	FATTR4_MODE					= 33,
	FATTR4_NO_TRUNC				= 34,
	FATTR4_NUMLINKS				= 35,
	FATTR4_OWNER				= 36,
	FATTR4_OWNER_GROUP			= 37,
	FATTR4_QUOTA_AVAIL_HARD		= 38,
	FATTR4_QUOTA_AVAIL_SOFT		= 39,
	FATTR4_QUOTA_USED			= 40,
	FATTR4_RAWDEV				= 41,
	FATTR4_SPACE_AVAIL			= 42,
	FATTR4_SPACE_FREE			= 43,
	FATTR4_SPACE_TOTAL			= 44,
	FATTR4_SPACE_USED			= 45,
	FATTR4_SYSTEM				= 46,
	FATTR4_TIME_ACCESS			= 47,
	FATTR4_TIME_ACCESS_SET		= 48,
	FATTR4_TIME_BACKUP			= 49,
	FATTR4_TIME_CREATE			= 50,
	FATTR4_TIME_DELTA			= 51,
	FATTR4_TIME_METADATA		= 52,
	FATTR4_TIME_MODIFY			= 53,
	FATTR4_TIME_MODIFY_SET		= 54,
	FATTR4_MOUNTED_ON_FILEID	= 55,
	FATTR4_MAXIMUM_ATTR_ID
};

enum FileType {
	NF4REG			= 1,    /* Regular File */
	NF4DIR			= 2,    /* Directory */
	NF4BLK			= 3,    /* Special File - block device */
	NF4CHR			= 4,    /* Special File - character device */
	NF4LNK			= 5,    /* Symbolic Link */
	NF4SOCK			= 6,    /* Special File - socket */
	NF4FIFO			= 7,    /* Special File - fifo */
	NF4ATTRDIR		= 8,    /* Attribute Directory */
	NF4NAMEDATTR	= 9     /* Named Attribute */
};

static const mode_t sNFSFileTypeToHaiku[] = {
	S_IFREG, S_IFREG, S_IFDIR, S_IFBLK, S_IFCHR, S_IFLNK, S_IFSOCK, S_IFIFO,
	S_IFDIR, S_IFREG
};

enum FileHandleExpiryType {
	FH4_PERSISTENT			= 0x00,
	FH4_NOEXPIRE_WITH_OPEN	= 0x01,
	FH4_VOLATILE_ANY		= 0x02,
	FH4_VOL_MIGRATION		= 0x04,
	FH4_VOL_RENAME			= 0x08
};

enum OpenAccess {
	OPEN4_SHARE_ACCESS_READ		= 1,
	OPEN4_SHARE_ACCESS_WRITE	= 2
};

enum OpenCreate {
	OPEN4_NOCREATE			= 0,
	OPEN4_CREATE			= 1
};

enum OpenClaim {
	CLAIM_NULL				= 0,
	CLAIM_PREVIOUS			= 1,
	CLAIM_DELEGATE_CUR		= 2,
	CLAIM_DELEGATE_PREV		= 3
};

enum OpenFlags {
	OPEN4_RESULT_CONFIRM		= 2,
	OPEN4_RESULT_LOCKTYPE_POSIX	= 4
};

enum Errors {
	NFS4_OK						= 0,
	NFS4ERR_PERM				= 1,
	NFS4ERR_NOENT				= 2,
	NFS4ERR_IO					= 5,
	NFS4ERR_NXIO				= 6,
	NFS4ERR_ACCESS				= 13,
	NFS4ERR_EXIST				= 17,
	NFS4ERR_XDEV				= 18,
	NFS4ERR_NOTDIR				= 20,
	NFS4ERR_ISDIR				= 21,
	NFS4ERR_INVAL				= 22,
	NFS4ERR_FBIG				= 27,
	NFS4ERR_BADHANDLE			= 10001,
	NFS4ERR_BAD_COOKIE			= 10003,
	NFS4ERR_NOTSUPP				= 10004,
	NFS4ERR_TOOSMALL			= 10005,
	NFS4ERR_SERVERFAULT			= 10006,
	NFS4ERR_BADTYPE				= 10007,
	NFS4ERR_DELAY				= 10008,
	NFS4ERR_SAME				= 10009,
	NFS4ERR_DENIED				= 10010,
	NFS4ERR_EXPIRED				= 10011,
	NFS4ERR_LOCKED				= 10012,
	NFS4ERR_GRACE				= 10013,
	NFS4ERR_FHEXPIRED			= 10014,
	NFS4ERR_SHARE_DENIED		= 10015,
	NFS4ERR_WRONGSEC			= 10016,
	NFS4ERR_CLID_INUSE			= 10017,
	NFS4ERR_RESOURCE			= 10018,
	NFS4ERR_MOVED				= 10019,
	NFS4ERR_NOFILEHANDLE		= 10020,
	NFS4ERR_MINOR_VERS_MISMATCH	= 10021,
	NFS4ERR_STALE_CLIENTID		= 10022,
	NFS4ERR_STALE_STATEID		= 10023,
	NFS4ERR_OLD_STATEID			= 10024,
	NFS4ERR_BAD_STATEID			= 10025,
	NFS4ERR_BAD_SEQID			= 10026,
	NFS4ERR_NOT_SAME			= 10027,
	NFS4ERR_LOCK_RANGE			= 10028,
	NFS4ERR_SYMLINK				= 10029,
	NFS4ERR_RESTOREFH			= 10030,
	NFS4ERR_LEASE_MOVED			= 10031,
	NFS4ERR_ATTRNOTSUPP			= 10032,
	NFS4ERR_NO_GRACE			= 10033,
	NFS4ERR_RECLAIM_BAD			= 10034,
	NFS4ERR_RECLAIM_CONFLICT	= 10035,
	NFS4ERR_BADXDR				= 10036,
	NFS4ERR_LOCKS_HELD			= 10037,
	NFS4ERR_OPENMODE			= 10038,
	NFS4ERR_BADOWNER			= 10039,
	NFS4ERR_BADCHAR				= 10040,
	NFS4ERR_BADNAME				= 10041,
	NFS4ERR_BAD_RANGE			= 10042,
	NFS4ERR_LOCK_NOTSUPP		= 10043,
	NFS4ERR_OP_ILLEGAL			= 10044,
	NFS4ERR_DEADLOCK			= 10045,
	NFS4ERR_FILE_OPEN			= 10046,
	NFS4ERR_ADMIN_REVOKED		= 10047,
	NFS4ERR_CB_PATH_DOWN		= 10048
};


#endif	// NFS4DEFS_H

